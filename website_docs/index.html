<!DOCTYPE html>
<html>
<head>
<title>
    CatTracks | Transportation and Parking Services 
</title>
<link rel="stylesheet" href="styles/CatTracks.css">
</head>
<body>
<div>
    <button class="header">
    </button>
    <div>
        <img src="image/ucmlogo (1).png" alt="UCM Logo">
    </div>
</div>

<form id = "locationForm">
    <label for="goPlaces" class="label">Choose where would you like to go:</label>
    <select id="goPlaces" name="goPlaces" class="menu">
        <option value="Amtrak Station">Amtrak Station</option>
        <option value="Buena Vista Dr">Buena Vista Dr</option>
        <option value="Cardella Rd. & 'M' Street (North)">Cardella Rd. & 'M' Street (North)</option>
        <option value="Cardella Rd. & 'M' Street (South)">Cardella Rd. & 'M' Street (South)</option>
        <option value="Compass Pointe Apts">Compass Pointe Apts</option>
        <option value="El Portal & G Street">El Portal & G Street</option>
        <option value="El Redondo Dr">El Redondo Dr</option>
        <option value="Foothill Drive">Foothill Drive</option>
        <option value="G St. & W. Alexander Ave">G St. & W. Alexander Ave</option>
        <option value="G St. & W. Alexander Ave. (Bus Stop Paul's Place)">G St. & W. Alexander Ave. (Bus Stop Paul's Place)</option>
        <option value="G Street South">G Street South</option>
        <option value="Granville Apartments">Granville Apartments</option>
        <option value="Ironstone Dr. & M St">Ironstone Dr. & M St</option>
        <option value="K St. Between 18th & 19th">K St. Between 18th & 19th</option>
        <option value="M St. At Bellevue RD">M St. At Bellevue RD</option>
        <option value="M Street Village Apartments">M Street Village Apartments</option>
        <option value="Meadows Ave & Olivewood Dr (Foodmaxx)">Meadows Ave & Olivewood Dr (Foodmaxx)</option>
        <option value="Merced College The Bus Terminal">Merced College The Bus Terminal</option>
        <option value="Merced Mall Target">Merced Mall Target</option>
        <option value="Merced Transpo">Merced Transpo</option>
        <option value="Moraga Subdivision">Moraga Subdivision</option>
        <option value="Promenade Center">Promenade Center</option>
        <option value="R Street Village Apts">R Street Village Apts</option>
        <option value="Rite Aid/Walgreens">Rite Aid/Walgreens</option>
        <option value="TriCollege/Mercy">TriCollege/Mercy</option>
        <option value="TriCollege/Mercy (Bus stop on G next to Tri College)">TriCollege/Mercy (Bus stop on G next to Tri College)</option>
        <option value="UC Merced Downtown Campus Center">UC Merced Downtown Campus Center</option>
        <option value="University Surgery Center">University Surgery Center</option>
        <option value="University Transit Center">University Transit Center</option>
        <option value="Village Apts. 'M' Street">Village Apts. 'M' Street</option>
        <option value="Walmart on Loughborough Dr">Walmart on Loughborough Dr</option>
        <option value="Yosemite & Cordova (Merced Physician Center)">Yosemite & Cordova (Merced Physician Center)</option>
        <option value="Yosemite Crossings Shopping Center">Yosemite Crossings Shopping Center</option>
    </select>

    <label for="comePlaces" class="label">Choose where you are currently located:</label>
        <select id="comePlaces" name="comePlaces" class="menu">
        <option value="Amtrak Station">Amtrak Station</option>
        <option value="Buena Vista Dr">Buena Vista Dr</option>
        <option value="Cardella Rd. & 'M' Street (North)">Cardella Rd. & 'M' Street (North)</option>
        <option value="Cardella Rd. & 'M' Street (South)">Cardella Rd. & 'M' Street (South)</option>
        <option value="Compass Pointe Apts">Compass Pointe Apts</option>
        <option value="El Portal & G Street">El Portal & G Street</option>
        <option value="El Redondo Dr">El Redondo Dr</option>
        <option value="Foothill Drive">Foothill Drive</option>
        <option value="G St. & W. Alexander Ave">G St. & W. Alexander Ave</option>
        <option value="G St. & W. Alexander Ave. (Bus Stop Paul's Place)">G St. & W. Alexander Ave. (Bus Stop Paul's Place)</option>
        <option value="G Street South">G Street South</option>
        <option value="Granville Apartments">Granville Apartments</option>
        <option value="Ironstone Dr. & M St">Ironstone Dr. & M St</option>
        <option value="K St. Between 18th & 19th">K St. Between 18th & 19th</option>
        <option value="M St. At Bellevue RD">M St. At Bellevue RD</option>
        <option value="M Street Village Apartments">M Street Village Apartments</option>
        <option value="Meadows Ave & Olivewood Dr (Foodmaxx)">Meadows Ave & Olivewood Dr (Foodmaxx)</option>
        <option value="Merced College The Bus Terminal">Merced College The Bus Terminal</option>
        <option value="Merced Mall Target">Merced Mall Target</option>
        <option value="Merced Transpo">Merced Transpo</option>
        <option value="Moraga Subdivision">Moraga Subdivision</option>
        <option value="Promenade Center">Promenade Center</option>
        <option value="R Street Village Apts">R Street Village Apts</option>
        <option value="Rite Aid/Walgreens">Rite Aid/Walgreens</option>
        <option value="TriCollege/Mercy">TriCollege/Mercy</option>
        <option value="TriCollege/Mercy (Bus stop on G next to Tri College)">TriCollege/Mercy (Bus stop on G next to Tri College)</option>
        <option value="UC Merced Downtown Campus Center">UC Merced Downtown Campus Center</option>
        <option value="University Surgery Center">University Surgery Center</option>
        <option value="University Transit Center">University Transit Center</option>
        <option value="Village Apts. 'M' Street">Village Apts. 'M' Street</option>
        <option value="Walmart on Loughborough Dr">Walmart on Loughborough Dr</option>
        <option value="Yosemite & Cordova (Merced Physician Center)">Yosemite & Cordova (Merced Physician Center)</option>
        <option value="Yosemite Crossings Shopping Center">Yosemite Crossings Shopping Center</option>
    </select>

    <button type = "submit">Submit</button>
</form>
<div id="result">

</div>

<script>
    //finds the html element with id goPlaces and stores it in the constant variable named goPlaces
    const locationForm = document.getElementById('locationForm')
    const goPlaces = document.getElementById('goPlaces')
    const comePlaces = document.getElementById('comePlaces')

    //code contacts this url for information
    const baseUrl = 'http://localhost:8383'

    locationForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const parcel = goPlaces.value;
      const parcel2 = comePlaces.value;
      
      // Basic validation: make sure users have made a selection.
      if (!parcel || !parcel2) {
        alert('Please select values for both dropdowns.');
        return;
      }
      
      // Send both values in a single POST request.
      const res = await fetch(baseUrl, {
        method: 'POST',
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          parcel: parcel,
          parcel2: parcel2
        })
      });
      
      // Optionally handle the server response
      const result = await res.json();
      document.getElementById('result').innerText = result.result;
      console.log(result);
    });
</script>

</body>
</html>